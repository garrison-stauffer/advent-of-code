package golang

import (
	"fmt"
	"garrison-stauffer.com/advent-of-code/flnt"
	"github.com/stretchr/testify/require"
	"testing"
)

func TestProblem7(t *testing.T) {
	prob := Problem7{}

	t.Run("run the problem", func(t *testing.T) {
		result, err := prob.Part1(ReadProblemInput(7, 1))
		result2, err2 := prob.Part2(ReadProblemInput(7, 1))

		require.NoError(t, err)
		require.NoError(t, err2)

		fmt.Printf("result is %v  %v \n", result, result2)
	})

	t.Run("part 1 test cases", func(t *testing.T) {

		do := Suite(prob.Part1)

		t.Run("provided test case", func(t *testing.T) {
			do(t).parsing(flnt.Spl(
				`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`,
			)).hasToBe(21)
		})
	})
	t.Run("part 2 test cases", func(t *testing.T) {

		do := Suite(prob.Part2)

		t.Run("provided test cases", func(t *testing.T) {
			do(t).
				parsing(flnt.Spl(
					`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`,
				)).hasToBe(40).
				parsing(flnt.Spl(`...S...
.......
...^...
.......
..^.^..
.......
...^...`,
				)).hasToBe(6).

				//.......S.......
				//.......1....... = 1
				//.......^....... = 1
				//......1.1...... = 2
				//......^.^...... = 2
				//.....1.2.1..... = 4
				//.....^.^.^..... = 4
				//....1.3.3.1.... = 8
				//....^.^.3.^.... = 8
				//...1.4.331.1... = 13
				//...^.^.33^.^... = 13
				//..1.5.434.2.1.. = 20
				//..^.5.^34.2.^.. = 20
				//.1.154.74.21.1. = 26
				//.^.^.^.^4^2..^. = 26
				//1.2.a.b.b.211.1` = 40
				parsing(flnt.Spl(`...S...
.......
...^...
.......`,
				)).hasToBe(2).
				parsing(flnt.Spl(
					`.......S.......
...............
.......^.......
...............
......^.^......
...............`,
					//.....^.^.^.....
					//...............
					//....^.^...^....
					//...............
					//...^.^...^.^...
					//...............
					//..^...^.....^..
					//...............
					//.^.^.^.^.^...^.
					//...............`,
				)).hasToBe(4).
				parsing(flnt.Spl(
					`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............`,
					//....^.^...^....
					//...............
					//...^.^...^.^...
					//...............
					//..^...^.....^..
					//...............
					//.^.^.^.^.^...^.
					//...............`,
				)).hasToBe(8).
				parsing(flnt.Spl(
					`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............`,
					//...^.^...^.^...
					//...............
					//..^...^.....^..
					//...............
					//.^.^.^.^.^...^.
					//...............`,
				)).hasToBe(13).
				debug().
				parsing(flnt.Spl(
					`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............`,
					//..^...^.....^..
					//...............
					//.^.^.^.^.^...^.
					//...............`,
				)).hasToBe(20).
				parsing(flnt.Spl(
					`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............`,
					//.^.^.^.^.^...^.
					//...............`,
				)).hasToBe(26).
				parsing(flnt.Spl(
					`.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`,
				)).hasToBe(40)
		})
	})
}
